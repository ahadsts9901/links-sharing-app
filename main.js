const firebaseConfig={apiKey:"AIzaSyDDkH9pqIcdWmRlXHdyC2G0z0Lhlej5dCw",authDomain:"links-sharing-b9c2a.firebaseapp.com",projectId:"links-sharing-b9c2a",storageBucket:"links-sharing-b9c2a.appspot.com",messagingSenderId:"606062782904",appId:"1:606062782904:web:c4a1a96a5f42be8236c74d"};firebase.initializeApp(firebaseConfig);var db=firebase.firestore();let section=document.querySelector(".section");function addLink(e){e.preventDefault();let t=document.querySelector(".input").value;db.collection("users").add({link:t,timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(e=>{Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Added Successfully"}),renderLink()}).catch(e=>{console.error("Error adding document: ",e)}),document.querySelector(".input").value=""}function renderLink(){section.innerHTML="",db.collection("users").orderBy("timestamp","desc").get().then(function(e){0===e.size?section.innerHTML="<div class='blue'>No Links found</div>":e.forEach(function(e){var t=e.data();let n=document.createElement("div");n.className="rowScroll",section.appendChild(n);let i=document.createElement("a");i.className="scrollX",t.link.startsWith("https")?(i.setAttribute("target","_blank"),i.setAttribute("href",`${t.link}`),i.innerText=t.link):(i.innerText=t.link,i.style.textDecoration="none"),n.appendChild(i);let o=document.createElement("div");o.className+=" small-container",n.appendChild(o);let r=t.timestamp?t.timestamp.toDate():new Date,a=document.createElement("p");a.className+=" small",a.innerText=moment(r).fromNow(),o.appendChild(a);let s=document.createElement("p");s.className="bi bi-trash-fill",s.className+=" small",s.addEventListener("click",()=>deleteLink(e.id)),o.appendChild(s)})}).catch(function(e){console.log("Error getting documents: ",e)})}async function deleteLink(e){const{value:t}=await Swal.fire({title:"Enter Your Password",input:"password",inputLabel:"Password",inputPlaceholder:"Enter Your Password",confirmButtonColor:"#212121",confirmButtonText:"Delete URL",inputAttributes:{maxlength:10,autocapitalize:"off",autocorrect:"off"}});"48597555"===t?Swal.fire({title:"Do You Want To Delete It ?",showDenyButton:!0,confirmButtonText:"Delete",denyButtonText:"Don't Delete",confirmButtonColor:"#212121",denyButtonColor:"#212121"}).then(t=>{if(t.isConfirmed){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Deleted Successfully"}),db.collection("users").doc(e).delete().then(()=>{renderLink()}).catch(e=>{console.error("Error deleting document: ",e)})}else renderLink()}):Swal.fire({icon:"error",title:"Access Denied",confirmButtonText:"OK",confirmButtonColor:"#212121"})}document.addEventListener("DOMContentLoaded",function(){renderLink(),setInterval(()=>{renderLink()},2e4)}),document.querySelector("#form").addEventListener("submit",addLink);